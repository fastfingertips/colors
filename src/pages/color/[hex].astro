---
import Layout from '../../layouts/Layout.astro';
import Footer from '../../components/Footer.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import { generateShades, generateTints, isDarkColor, hexToRgb, hexToHsl, getContrastRatio, getWCAGRating, getRawCmyk, getRawOklch, getColorPsychology } from '../../utils/colorUtils';
import { getCulturalAnalysis } from '../../utils/culturalColorData';
import { getColorName } from '../../utils/colorNaming';
import ColorSpaceEditor from '../../components/editor/ColorSpaceEditor.astro';
import ColorCard from '../../components/cards/ColorCard.astro';
import PsychologyCard from '../../components/cards/PsychologyCard.astro';
import CultureCard from '../../components/cards/CultureCard.astro';
import AccessibilityCheck from '../../components/editor/AccessibilityCheck.astro';
import ActionButtons from '../../components/editor/ActionButtons.astro';
import MainHexInput from '../../components/editor/MainHexInput.astro';

export const prerender = false;

const { hex } = Astro.params;
const colorHex = `#${hex}`;

const isValidHex = /^#[0-9A-F]{6}$/i.test(colorHex);

if (!isValidHex) {
  return Astro.redirect('/');
}

const shades = generateShades(colorHex);
const tints = generateTints(colorHex).reverse();
const isDark = isDarkColor(colorHex);
const rgb = hexToRgb(colorHex);
const hsl = hexToHsl(colorHex);
const rawCmyk = getRawCmyk(colorHex);
const rawOklch = getRawOklch(colorHex);
const cmyk = `cmyk(${rawCmyk.c}%, ${rawCmyk.m}%, ${rawCmyk.y}%, ${rawCmyk.k}%)`;
const oklch = `oklch(${rawOklch.l}%, ${rawOklch.c}, ${rawOklch.h})`;

const whiteContrast = getContrastRatio(colorHex, '#ffffff');
const blackContrast = getContrastRatio(colorHex, '#000000');
const whiteRating = getWCAGRating(whiteContrast);
const blackRating = getWCAGRating(blackContrast);

const psychology = getColorPsychology(colorHex);
const cultural = getCulturalAnalysis(colorHex);
const colorName = getColorName(colorHex);
const contrastColor = isDark ? '#ffffff' : '#000000';
---

<Layout title={`Color ${colorHex}`}>
  <Breadcrumbs items={[{ label: 'Color', active: false }, { label: colorHex, active: true }]} />
  
  <div class="sticky-color-bar" id="sticky-color-bar">
    <div class="sticky-swatch" id="sticky-swatch" style={`background-color: ${colorHex}`}></div>
    <input type="text" id="sticky-hex" value={colorHex} spellcheck="false" maxlength="7" />
  </div>
  
  <main class="color-detail-page guidelined">
    <div class="guideline-v v1"></div>
    <div class="guideline-v v2"></div>
    <div class="guideline-v v3"></div>
    <div class="guideline-v v4"></div>
    <div class="guideline-h h1"></div>
    <div class="guideline-h h2"></div>
    <div class="guideline-h h3"></div>
    <div class="guideline-h h4"></div>
    <ActionButtons />


    <div class="color-editor-card" id="overview" style={`background-color: ${colorHex}; color: ${contrastColor}`}>
          <MainHexInput colorHex={colorHex} colorName={colorName} />

          <div class="editor-grid">
            <ColorSpaceEditor 
              label="RGB" 
              inputId="rgb-input" 
              initialValue={rgb}
              tooltip="Red, Green, Blue color model. Values 0-255."
              sliders={[
                { label: 'R', id: 'slider-r', min: 0, max: 255 },
                { label: 'G', id: 'slider-g', min: 0, max: 255 },
                { label: 'B', id: 'slider-b', min: 0, max: 255 }
              ]}
            />
            <ColorSpaceEditor 
              label="HSL" 
              inputId="hsl-input" 
              initialValue={hsl}
              tooltip="Hue, Saturation, Lightness. H: 0-360, S: 0-100%, L: 0-100%."
              sliders={[
                { label: 'H', id: 'slider-h', min: 0, max: 360 },
                { label: 'S', id: 'slider-s', min: 0, max: 100 },
                { label: 'L', id: 'slider-l', min: 0, max: 100 }
              ]}
            />
            <ColorSpaceEditor 
              label="CMYK" 
              inputId="cmyk-input" 
              initialValue={cmyk}
              tooltip="Cyan, Magenta, Yellow, Key (Black). Standard for print."
              readonly={true}
              sliders={[
                { label: 'C', id: 'slider-c', min: 0, max: 100 },
                { label: 'M', id: 'slider-m', min: 0, max: 100 },
                { label: 'Y', id: 'slider-y', min: 0, max: 100 },
                { label: 'K', id: 'slider-k', min: 0, max: 100 }
              ]}
            />
            <ColorSpaceEditor 
              label="OKLCH" 
              inputId="oklch-input" 
              initialValue={oklch}
              tooltip="Perceptual Lightness, Chroma, Hue. Modern color space for consistent perceived lightness."
              readonly={true}
              sliders={[
                { label: 'L', id: 'slider-ok-l', min: 0, max: 100 },
                { label: 'C', id: 'slider-ok-c', min: 0, max: 0.32, step: '0.001' },
                { label: 'H', id: 'slider-ok-h', min: 0, max: 360 }
              ]}
            />
          </div>
        </div>


      <AccessibilityCheck 
        whiteContrast={whiteContrast} 
        blackContrast={blackContrast} 
        whiteRating={whiteRating} 
        blackRating={blackRating} 
      />

    <div class="page-container">
      <aside class="sidebar-toc">
        <nav>
          <ul>
            <li>
              <a href="#overview" class="toc-link active" data-section="overview">
                <span class="toc-dot"></span>
                Overview
              </a>
            </li>
            <li>
              <a href="#psychology-section" class="toc-link" data-section="psychology">
                <span class="toc-dot"></span>
                Psychology
              </a>
            </li>
            <li>
              <a href="#culture-section" class="toc-link" data-section="culture">
                <span class="toc-dot"></span>
                Culture
              </a>
            </li>
            <li>
              <a href="#harmonies-section" class="toc-link" data-section="harmonies">
                <span class="toc-dot"></span>
                Harmonies
              </a>
            </li>
            <li>
              <a href="#shades-tints-section" class="toc-link" data-section="shades-tints">
                <span class="toc-dot"></span>
                Shades & Tints
              </a>
            </li>
          </ul>
        </nav>
      </aside>

      <div class="content-section">
        <div class="color-dashboard">
          <section class="psychology-section" id="psychology-section">
            <div class="section-header">
              <div class="header-with-info">
                <h2>Mood & Emotion</h2>
                <span class="info-icon" data-tooltip="The psychological and emotional impact of this color.">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                </span>
              </div>
            </div>
            <PsychologyCard data={psychology} colorHex={colorHex} />
          </section>

          <div class="dashboard-divider"></div>

          <section class="culture-section" id="culture-section">
            <div class="section-header">
              <div class="header-with-info">
                <h2>Cultural Perception</h2>
                <span class="info-icon" data-tooltip="How this color is perceived across different world cultures and regions.">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                </span>
              </div>
            </div>
            <CultureCard data={cultural} />
          </section>

          <div class="dashboard-divider"></div>

          <section class="harmonies-area" id="harmonies-section">
            <div class="section-header">
              <div class="header-with-info">
                <h2>Harmonies</h2>
                <span class="info-icon" data-tooltip="Mathematical color relationships.">
                  <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                </span>
              </div>
            </div>
            <div class="harmonies-grid" id="harmonies-grid">
            </div>
          </section>

          <div class="dashboard-divider"></div>

          <div class="grids-area" id="shades-tints-section">
            <section class="column" id="tints-section">
              <div class="section-header">
                <div class="header-with-info">
                  <h2>Tints</h2>
                  <span class="info-icon" data-tooltip="Original color mixed with white.">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                  </span>
                </div>
              </div>
              <div class="grid" id="tints-grid">
                {tints.map((tint) => (
                  <ColorCard hex={tint} />
                ))}
              </div>
            </section>

            <section class="column" id="shades-section">
              <div class="section-header">
                <div class="header-with-info">
                  <h2>Shades</h2>
                  <span class="info-icon" data-tooltip="Original color mixed with black.">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                  </span>
                </div>
              </div>
              <div class="grid" id="shades-grid">
                {shades.map((shade) => (
                  <ColorCard hex={shade} />
                ))}
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>

    <Footer />
  </main>
</Layout>

<style is:global>
  .color-detail-page {
    min-height: 100vh;
    background-color: var(--bg-color);
    padding-top: 80px;
  }



  .color-editor-card {
    padding: 25px;
    margin: 15px auto;
    width: 90%;
    max-width: 950px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    color: inherit;
    border: none;
    box-shadow: var(--shadow-main);
    background: inherit;
    border-radius: var(--radius-sm);
    position: relative;
    z-index: 10;
  }

  .main-hex-section {
    position: relative;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 25px;
  }

  .color-name-display {
    text-align: center;
    margin-top: 4px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
  }

  .color-evocative-name {
    font-size: 1.1rem;
    font-weight: 600;
    opacity: 0.85;
    letter-spacing: 0.02em;
  }

  .color-descriptor {
    font-size: 0.75rem;
    font-weight: 400;
    opacity: 0.5;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  #color-input {
    background: transparent;
    border: none;
    font-size: 4.5rem;
    font-weight: 900;
    text-align: center;
    width: 100%;
    outline: none;
    font-family: inherit;
    letter-spacing: -0.05em;
    text-transform: uppercase;
    color: inherit;
    text-decoration: underline;
    text-underline-offset: 8px;
    text-decoration-thickness: 2px;
    text-decoration-color: rgba(255, 255, 255, 0.3);
  }

  #color-input:hover, #color-input:focus {
    text-decoration-color: currentColor;
  }

  .action-group {
    position: fixed;
    top: 50%;
    right: 24px;
    transform: translateY(-50%);
    z-index: 100;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: var(--controls-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: 8px 6px;
    gap: 2px;
    box-shadow: var(--shadow-main);
  }

  .header-action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 12px 6px;
    width: 70px;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: inherit;
    font-weight: 600;
    font-size: 0.7rem;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }

  .header-action-btn:hover {
    background: var(--button-hover);
  }

  .action-group .divider {
    width: 32px;
    height: 1px;
    background: var(--border-color);
    margin: 6px 0;
    opacity: 0.5;
  }

  .kbd-hint {
    font-size: 0.55rem;
    background: var(--surface-color);
    padding: 1px 4px;
    border-radius: 3px;
    border: 1px solid var(--border-color);
    opacity: 0.7;
    margin-top: 2px;
    font-weight: 800;
    letter-spacing: 0.05em;
    color: var(--text-color);
    display: block;
  }

  .sticky-color-bar {
    position: fixed;
    top: 24px;
    left: 50%;
    transform: translate(-50%, -100px);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 16px;
    background: var(--controls-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-main);
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s;
    opacity: 0;
    pointer-events: none;
  }

  .sticky-color-bar.visible {
    transform: translate(-50%, 0);
    opacity: 1;
    pointer-events: all;
  }

  .sticky-swatch {
    width: 20px;
    height: 20px;
    border-radius: 3px;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  #sticky-hex {
    font-family: var(--font-mono);
    font-weight: 700;
    font-size: 0.9rem;
    color: var(--text-color);
    letter-spacing: 0.02em;
    background: transparent;
    border: none;
    outline: none;
    width: 80px;
    padding: 0;
    cursor: text;
    text-transform: uppercase;
    border-bottom: 1px dashed var(--border-color);
  }

  #sticky-hex:hover, #sticky-hex:focus {
    border-bottom: 1px solid var(--accent-color);
  }

  .editor-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    align-items: flex-start;
  }

  .color-space-block {
    display: flex;
    flex-direction: column;
    gap: 15px;
    background: transparent;
    padding: 20px;
    border: none;
  }

  .value-input-group {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 2px;
    background: var(--button-active);
    padding: 12px 16px;
    border-radius: var(--radius-sm);
    transition: background 0.2s;
  }

  .value-input-group:focus-within {
    background: var(--button-hover);
  }

  .value-label {
    font-size: 0.75rem;
    font-weight: 800;
    opacity: 0.5;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    text-align: center;
  }

  .value-input-group input {
    background: transparent;
    border: none;
    font-family: var(--font-mono);
    font-size: 1.1rem;
    font-weight: 700;
    outline: none;
    color: inherit;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: center;
  }

  .value-input-group:hover {
    background: var(--button-hover);
  }

  .sliders-column {
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-height: 400px;
    overflow-y: auto;
    padding-right: 10px;
  }

  .sliders-column::-webkit-scrollbar {
    width: 4px;
  }
  .sliders-column::-webkit-scrollbar-track {
    background: transparent;
  }
  .sliders-column::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-sm);
  }

  .group-label {
    font-size: 0.65rem;
    font-weight: 800;
    opacity: 0.3;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 6px;
  }

  .slider-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 0 5px;
  }

  .slider-item {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .slider-item label {
    font-size: 0.8rem;
    font-weight: 900;
    width: 20px;
    opacity: 0.7;
  }

  .slider-item input[type="range"] {
    flex: 1;
    -webkit-appearance: none;
    height: 8px;
    border-radius: var(--radius-sm);
    outline: none;
    box-shadow: var(--shadow-inset);
    cursor: pointer;
  }

  #slider-h {
    background: linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);
  }

  .slider-item input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 20px;
    background: #fff;
    cursor: pointer;
    box-shadow: var(--shadow-sm);
    border: 1px solid rgba(0,0,0,0.1);
    transition: transform 0.2s cubic-bezier(0.2, 1, 0.3, 1), box-shadow 0.2s;
    margin-top: -6px;
  }

  .slider-item input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-hover);
  }

  .accessibility-check {
    display: flex;
    justify-content: center;
    gap: 30px;
    background: var(--surface-color);
    padding: 12px 25px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-main);
    margin: 20px auto;
    width: 90%;
    max-width: 950px;
    position: relative;
    z-index: 10;
  }

  .contrast-item {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .contrast-item .label {
    font-size: 0.8rem;
    font-weight: 600;
    opacity: 0.7;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .info-wrapper {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 5;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .info-icon {
    cursor: help;
    opacity: 0.15;
    transition: opacity 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .mini-copy-btn {
    cursor: pointer;
    opacity: 0.15;
    transition: all 0.2s cubic-bezier(0.2, 1, 0.3, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    border-radius: var(--radius-sm);
    background: transparent;
    border: none;
    color: inherit;
  }

  .info-wrapper:hover .mini-copy-btn,
  .info-wrapper:hover .info-icon {
    opacity: 0.5;
  }

  .mini-copy-btn:hover,
  .info-icon:hover {
    opacity: 1 !important;
  }

  .mini-copy-btn:hover {
    background: var(--button-hover);
    transform: scale(1.1);
  }

  .mini-copy-btn:active {
    transform: scale(0.9);
  }



  .info-icon::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 120%;
    right: 0;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 8px 12px;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 500;
    width: 180px;
    text-align: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s cubic-bezier(0.2, 1, 0.3, 1);
    transform: translateY(10px);
    backdrop-filter: blur(10px);
    box-shadow: var(--shadow-main);
    pointer-events: none;
    line-height: 1.4;
  }

  .info-icon:hover::after {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }


  .header-with-info {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .header-with-info .info-icon {
    margin-top: 5px;
  }

  .contrast-item .ratio {
    font-family: var(--font-mono);
    font-weight: 700;
    font-size: 1.1rem;
  }

  .badges {
    display: flex;
    gap: 6px;
  }

  .badge {
    font-size: 0.65rem;
    font-weight: 800;
    padding: 2px 8px;
    border-radius: var(--radius-sm);
    background: rgba(0,0,0,0.2);
    color: white;
  }

  .badge.pass {
    background: #22c55e;
    box-shadow: var(--shadow-glow-success);
  }

  .badge.fail {
    background: #ef4444;
    opacity: 0.5;
  }

  .dot {
    margin: 0 10px;
  }

  .psychology-section {
    padding: 30px;
  }

  .psychology-card {
    position: relative;
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: 35px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    overflow: hidden;
    box-shadow: var(--shadow-main);
  }

  .psy-glow {
    position: absolute;
    top: -50px;
    right: -50px;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0.15;
    pointer-events: none;
  }

  .psy-content {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }

  .psy-main {
    display: flex;
    align-items: baseline;
    gap: 25px;
    flex-wrap: wrap;
  }

  #psy-name {
    font-size: 3rem;
    font-weight: 950;
    margin: 0;
    letter-spacing: -0.05em;
    text-transform: uppercase;
    color: var(--text-color);
    line-height: 1;
  }

  .tone-tag {
    font-size: 0.8rem;
    font-weight: 900;
    padding: 4px 12px;
    background: var(--accent-color);
    color: white;
    border-radius: 100px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    box-shadow: var(--shadow-glow);
  }

  .emotion-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .emotion-badge {
    padding: 6px 14px;
    background: var(--button-active);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-color);
    opacity: 0.8;
  }

  .psy-desc {
    font-size: 1.15rem;
    line-height: 1.6;
    margin: 0;
    max-width: 700px;
    color: var(--text-color);
    opacity: 0.7;
    font-weight: 500;
  }

  /* Cultural Section */
  .culture-section {
    padding: 30px;
  }

  .culture-card {
    background: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: 28px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    box-shadow: var(--shadow-main);
  }

  .culture-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 14px;
  }

  .culture-item {
    background: var(--button-active);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .culture-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }

  .culture-warning {
    background: rgba(230, 126, 34, 0.06);
    border: 1px solid rgba(230, 126, 34, 0.2);
  }

  .culture-item-header {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .culture-flag {
    font-size: 1.3rem;
    line-height: 1;
  }

  .culture-region {
    font-size: 0.8rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-color);
  }

  .culture-warn-badge {
    margin-left: auto;
    display: flex;
    align-items: center;
    color: #e67e22;
    opacity: 0.8;
  }

  .culture-meaning {
    font-size: 0.85rem;
    line-height: 1.55;
    margin: 0;
    color: var(--text-color);
    opacity: 0.75;
  }

  .culture-warnings {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .culture-warning-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px 16px;
    background: rgba(230, 126, 34, 0.08);
    border: 1px solid rgba(230, 126, 34, 0.2);
    border-radius: var(--radius-sm);
    font-size: 0.82rem;
    line-height: 1.5;
    color: var(--text-color);
  }

  .culture-warning-item svg {
    flex-shrink: 0;
    margin-top: 2px;
    color: #e67e22;
  }

  .culture-tip {
    padding: 14px 18px;
    background: rgba(46, 204, 113, 0.06);
    border: 1px solid rgba(46, 204, 113, 0.15);
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    line-height: 1.55;
    color: var(--text-color);
    opacity: 0.85;
  }

  .culture-tip strong {
    color: #2ecc71;
    margin-right: 4px;
  }

  html {
    scroll-behavior: smooth;
  }

  .page-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 40px;
  }

  .sidebar-toc {
    position: fixed;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    height: fit-content;
    z-index: 100;
    padding: 20px;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(15px);
    border-radius: var(--radius-sm);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow-main);
  }

  .sidebar-toc ul {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .toc-link {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    color: var(--text-color);
    font-size: 0.9rem;
    font-weight: 600;
    opacity: 0.4;
    transition: all 0.3s;
  }

  .toc-dot {
    width: 6px;
    height: 6px;
    background: currentColor;
    border-radius: var(--radius-sm);
    transition: transform 0.3s;
  }

  .toc-link:hover {
    opacity: 0.8;
  }

  .toc-link.active {
    opacity: 1;
    color: var(--primary-color);
  }

  .toc-link.active .toc-dot {
    transform: scale(2);
  }

  .content-section {
    margin: 40px 0 100px;
    position: relative;
    z-index: 10;
  }

  @media (max-width: 1000px) {
    .page-container {
      grid-template-columns: 1fr;
    }
    .sidebar-toc {
      display: none;
    }
  }

  .color-dashboard {
    background: transparent;
    box-shadow: none;
    border: none;
  }

  .harmonies-area {
    padding: 30px;
  }

  .shades-tints-divider {
    height: 1px;
    background: linear-gradient(to right, transparent, var(--border-color), transparent);
    opacity: 0.5;
  }

  .grids-area {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    padding: 30px;
  }

  .section-header {
    margin-bottom: 20px;
  }

  .section-header h2 {
    font-size: 1.1rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    opacity: 0.8;
  }

  .harmonies-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 25px;
  }

  .harmony-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    background: rgba(0, 0, 0, 0.02);
    padding: 12px;
    border-radius: var(--radius-sm);
    border: 1px solid rgba(0, 0, 0, 0.03);
    transition: all 0.2s;
  }

  .harmony-group:hover {
    background: rgba(0, 0, 0, 0.04);
    transform: translateY(-2px);
  }

  .harmony-title-wrapper {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 4px;
  }

  .harmony-label {
    font-size: 0.75rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-color);
    opacity: 0.6;
    margin-bottom: 0;
  }

  .vibration-warning svg {
    display: block;
    stroke: #ff4c4c;
  }

  .harmony-colors {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .harmony-colors .color-card {
    height: 60px;
    margin: 0;
    width: 100%;
    padding: 0 15px;
  }

  .harmony-colors .hex-label {
    font-size: 0.85rem;
  }

  .column h2 {
    font-size: 1.8rem;
    margin-bottom: 4px;
    font-weight: 800;
    letter-spacing: -0.02em;
  }

  .section-desc {
    font-size: 0.95rem;
    opacity: 0.6;
    margin-bottom: 24px;
  }

  .grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .color-card:hover {
    z-index: 10;
  }

  .copy-icon {
    opacity: 0;
    transform: scale(0.8) rotate(-10deg);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .color-card:hover .copy-icon {
    opacity: 1;
    transform: scale(1.1) rotate(0deg);
  }

  .card-overlay[style*="color: #fff"] {
    background: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.05));
  }
  
  .card-overlay[style*="color: #000"] {
    background: linear-gradient(rgba(255,255,255,0), rgba(255,255,255,0.05));
  }

  @media (max-width: 900px) {
    .shades-tints-grid {
      grid-template-columns: 1fr;
      padding: 24px;
    }
  }

  @media (max-width: 768px) {
    .header-content h1, #color-input {
      font-size: 3rem !important;
    }
    .action-group {
      right: 12px;
      top: 50%;
      transform: translateY(-50%) scale(0.9);
    }
  }
</style>

<script>
  import "../../client/hexPage";
</script>
